<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Title</title>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script
	src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=l7xx0ffb87c22bdb45ae8facaeeb7958ad36"></script>
<script type="text/javascript">
    var map;
    var nBus = 0;
    var nTaxi = 0;
    var nSubway = 0;
    var here = [37.509812901728836, 127.06139307841329];
    var markers = [{'type': 'bus', 'latitude': 37.5104082, 'longitude': 127.0627189},
                   {'type': 'bus', 'latitude': 37.5111539, 'longitude': 127.0615406},
                   {'type': 'bus', 'latitude': 37.5093334, 'longitude': 127.0623552},
                   {'type': 'bus', 'latitude': 37.508667, 'longitude': 127.0617005},
                   {'type': 'bus', 'latitude': 37.5081065, 'longitude': 127.0616639},
                   {'type': 'bus', 'latitude': 37.5084898, 'longitude': 127.0610138},
                   {'type': 'bus', 'latitude': 37.5097547, 'longitude': 127.0631256},
                   {'type': 'bus', 'latitude': 37.5095939, 'longitude': 127.059429},
                   {'type': 'bus', 'latitude': 37.5104504, 'longitude': 127.0619369},
                   {'type': 'bus', 'latitude': 37.5101888, 'longitude': 127.0626911},
                   {'type': 'bus', 'latitude': 37.5095357, 'longitude': 127.0629275},
                   {'type': 'bus', 'latitude': 37.5102475, 'longitude': 127.0626146},
                   {'type': 'subway', 'latitude': 37.508827, 'longitude': 127.063203}];
    function initTmap() {
        // 1. 지도 그리기
		map = new Tmapv2.Map("map_div", {
		center : new Tmapv2.LatLng(here[0], here[1]),
			width : "100%",
			height : "400px",
			zoom : 16,
			zoomControl : true,
			scrollwheel : true
		});

		// 2. 마커
        marker = new Tmapv2.Marker(
            {
                position : new Tmapv2.LatLng(here[0], here[1]),
                icon : "http://tmapapi.sktelecom.com/upload/tmap/marker/pin_r_m_e.png",
                iconSize : new Tmapv2.Size(24, 38),
                map : map
            }
        );

        for (var i in markers) {
            marker = new Tmapv2.Marker(
                {
                    position : new Tmapv2.LatLng(markers[i].latitude, markers[i].longitude),
					icon : "http://tmapapi.sktelecom.com/upload/tmap/marker/pin_r_m_s.png",
					iconSize : new Tmapv2.Size(24, 38),
					map : map
                }
            );

            if (markers[i].type == "bus") {
                nBus = nBus + 1;
            } else if (markers[i].type == "taxi") {
                nTaxi = nTaxi + 1;
            } else if (markers[i].type == "subway") {
                nSubway = nSubway + 1;
            }
        }

        var nums = "버스정류장: " + nBus + " 택시승강장: " + nTaxi + " 지하철역: " + nSubway;
        $("#result").text(nums);
    }
</script>
</head>
<body>
	
    <!-- 190430 기존 지도를 모두 이미지 처리 위해 주석 처리 S -->
    <div id="map_wrap" class="map_wrap3">
        <div id="map_div"></div>
    </div>
    <div class="map_act_btn_wrap clear_box"></div>
    <p id="result"></p>
    <br/>
</body>
<script src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
<script>
	$(document).ready(function() {initTmap()});
</script>
</html>